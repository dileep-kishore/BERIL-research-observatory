{% extends "base.html" %}

{% block title %}Collections - {{ app_name }}{% endblock %}

{% block content %}
<div class="page-header">
    <h1 class="page-title">BERDL Collections</h1>
    <p class="page-description">
        Explore the data collections available in the KBase Data Lakehouse.
    </p>
</div>

<!-- Primary Research Collections -->
<section class="section">
    <h2>Primary Research Collections</h2>
    <div class="grid grid-3">
        <a href="/collections/kbase_ke_pangenome" class="card">
            <div class="card-header">
                <span style="font-size: 1.5rem;">&#129516;</span>
                <span class="badge" style="background: rgba(57, 212, 230, 0.15); color: #39d4e6;">Primary</span>
            </div>
            <h3 class="card-title" style="color: var(--text-primary);">Pangenome Collection</h3>
            <p class="text-muted text-small" style="font-family: var(--font-mono);">kbase_ke_pangenome</p>
            <div class="card-content">
                <p class="text-small">293,059 genomes across 27,690 microbial species. Core/accessory gene classification, functional annotations, ANI relationships.</p>
            </div>
            <div class="card-footer">
                <span class="text-small text-muted">14 tables</span>
                <span class="text-small" style="color: var(--text-link);">Explore &rarr;</span>
            </div>
        </a>

        <a href="/collections/kescience_fitnessbrowser" class="card">
            <div class="card-header">
                <span style="font-size: 1.5rem;">&#128202;</span>
                <span class="badge" style="background: rgba(57, 212, 230, 0.15); color: #39d4e6;">Primary</span>
            </div>
            <h3 class="card-title" style="color: var(--text-primary);">Fitness Browser</h3>
            <p class="text-muted text-small" style="font-family: var(--font-mono);">kescience_fitnessbrowser</p>
            <div class="card-content">
                <p class="text-small">Gene fitness data from transposon mutant experiments across 40+ bacterial organisms. Essential genes and condition-specific phenotypes.</p>
            </div>
            <div class="card-footer">
                <span class="text-small text-muted">90+ tables</span>
                <span class="text-small" style="color: var(--text-link);">Explore &rarr;</span>
            </div>
        </a>

        <a href="/collections/kbase_genomes" class="card">
            <div class="card-header">
                <span style="font-size: 1.5rem;">&#128172;</span>
                <span class="badge" style="background: rgba(57, 212, 230, 0.15); color: #39d4e6;">Primary</span>
            </div>
            <h3 class="card-title" style="color: var(--text-primary);">KBase Genomes</h3>
            <p class="text-muted text-small" style="font-family: var(--font-mono);">kbase_genomes</p>
            <div class="card-content">
                <p class="text-small">Structural genomics data including contigs, features, and protein sequences from the KBase genome repository.</p>
            </div>
            <div class="card-footer">
                <span class="text-small text-muted">16 tables</span>
                <span class="text-small" style="color: var(--text-link);">Explore &rarr;</span>
            </div>
        </a>

        <a href="/collections/kbase_msd_biochemistry" class="card">
            <div class="card-header">
                <span style="font-size: 1.5rem;">&#9879;</span>
                <span class="badge" style="background: rgba(57, 212, 230, 0.15); color: #39d4e6;">Primary</span>
            </div>
            <h3 class="card-title" style="color: var(--text-primary);">ModelSEED Biochemistry</h3>
            <p class="text-muted text-small" style="font-family: var(--font-mono);">kbase_msd_biochemistry</p>
            <div class="card-content">
                <p class="text-small">Biochemistry reference data for metabolic modeling. Reactions, compounds, and pathway mappings.</p>
            </div>
            <div class="card-footer">
                <span class="text-small text-muted">4 tables</span>
                <span class="text-small" style="color: var(--text-link);">Explore &rarr;</span>
            </div>
        </a>

        <a href="/collections/kbase_phenotype" class="card">
            <div class="card-header">
                <span style="font-size: 1.5rem;">&#127793;</span>
                <span class="badge" style="background: rgba(57, 212, 230, 0.15); color: #39d4e6;">Primary</span>
            </div>
            <h3 class="card-title" style="color: var(--text-primary);">Phenotype Collection</h3>
            <p class="text-muted text-small" style="font-family: var(--font-mono);">kbase_phenotype</p>
            <div class="card-content">
                <p class="text-small">Experimental phenotype data including conditions, measurements, and growth outcomes.</p>
            </div>
            <div class="card-footer">
                <span class="text-small text-muted">7 tables</span>
                <span class="text-small" style="color: var(--text-link);">Explore &rarr;</span>
            </div>
        </a>
    </div>
</section>

<!-- Domain-Specific Collections -->
<section class="section">
    <h2>Domain-Specific Collections</h2>
    <div class="grid grid-2">
        <a href="/collections/phagefoundry" class="card">
            <div class="card-header">
                <span style="font-size: 1.5rem;">&#129440;</span>
                <span class="badge" style="background: rgba(163, 113, 247, 0.15); color: #a371f7;">Domain</span>
            </div>
            <h3 class="card-title" style="color: var(--text-primary);">PhageFoundry Browsers</h3>
            <p class="text-muted text-small" style="font-family: var(--font-mono);">phagefoundry_*</p>
            <div class="card-content">
                <p class="text-small">Phage genome browsers for specific bacterial hosts including Klebsiella, P. aeruginosa, Acinetobacter, and P. viridiflava.</p>
            </div>
            <div class="card-footer">
                <span class="text-small text-muted">4 browsers</span>
                <span class="text-small" style="color: var(--text-link);">Explore &rarr;</span>
            </div>
        </a>

        <a href="/collections/enigma_coral" class="card">
            <div class="card-header">
                <span style="font-size: 1.5rem;">&#129712;</span>
                <span class="badge" style="background: rgba(163, 113, 247, 0.15); color: #a371f7;">Domain</span>
            </div>
            <h3 class="card-title" style="color: var(--text-primary);">ENIGMA Coral</h3>
            <p class="text-muted text-small" style="font-family: var(--font-mono);">enigma_coral</p>
            <div class="card-content">
                <p class="text-small">ENIGMA project coral microbiome data. Taxonomic and functional profiles of coral-associated microbial communities.</p>
            </div>
            <div class="card-footer">
                <span class="text-small text-muted">Multiple tables</span>
                <span class="text-small" style="color: var(--text-link);">Explore &rarr;</span>
            </div>
        </a>
    </div>
</section>

<!-- Reference Collections -->
<section class="section">
    <h2>Reference Collections</h2>
    <p class="text-muted mb-8">Foundational reference data used across other collections.</p>

    <div class="card">
        <table class="data-table">
            <thead>
                <tr>
                    <th>Collection</th>
                    <th>ID</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>UniRef Clusters</strong></td>
                    <td><code>kbase_uniref50/90/100</code></td>
                    <td>Protein sequence clusters at 50%, 90%, and 100% identity thresholds</td>
                </tr>
                <tr>
                    <td><strong>UniProt Bacteria</strong></td>
                    <td><code>kbase_uniprot_bacteria</code></td>
                    <td>UniProt protein annotations for bacterial proteins</td>
                </tr>
                <tr>
                    <td><strong>UniProt Archaea</strong></td>
                    <td><code>kbase_uniprot_archaea</code></td>
                    <td>UniProt protein annotations for archaeal proteins</td>
                </tr>
                <tr>
                    <td><strong>Ontologies</strong></td>
                    <td><code>kbase_ontology_source</code></td>
                    <td>Ontology reference data (GO, KEGG, EC, etc.)</td>
                </tr>
            </tbody>
        </table>
    </div>
</section>

<!-- Cross-Collection Analysis -->
<section class="section">
    <div class="card" style="border-left: 4px solid var(--accent-secondary);">
        <h3 style="margin-bottom: var(--space-4);">Cross-Collection Analysis</h3>
        <p>
            Many research questions benefit from combining data across collections. For example:
        </p>
        <ul style="margin-top: var(--space-4);">
            <li><strong>Pangenome + Fitness</strong>: Which accessory genes show fitness effects under specific conditions?</li>
            <li><strong>Pangenome + Biochemistry</strong>: What metabolic pathways are enriched in core vs accessory genomes?</li>
            <li><strong>Fitness + Phenotype</strong>: How do gene fitness scores correlate with measured phenotypes?</li>
        </ul>
        <p style="margin-top: var(--space-4);">
            Check individual collection pages for documented cross-collection query patterns.
        </p>
    </div>
</section>
{% endblock %}
